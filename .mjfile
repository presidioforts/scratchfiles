const fs = require('fs');
const path = require('path');

// Specify the path to the .npmrc file (could be in the user directory or project root)
const npmrcPath = path.resolve(process.env.HOME || process.env.USERPROFILE, '.npmrc');

// Read the .npmrc file
try {
  const npmrc = fs.readFileSync(npmrcPath, 'utf8');

  // Use regex to extract the auth token
  const tokenMatch = npmrc.match(/:_authToken=(.*)/);
  if (tokenMatch && tokenMatch[1]) {
    const npmToken = tokenMatch[1];
    console.log(`Using NPM auth token: ${npmToken}`);
  } else {
    console.error('NPM auth token not found in .npmrc!');
  }
} catch (err) {
  console.error(`Error reading .npmrc file: ${err.message}`);
  process.exit(1);
}
